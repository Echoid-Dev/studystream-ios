<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Focus Mode - Landscape</title>
<style>
  body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
    color: #fff;
  }

  @media screen and (orientation: portrait) {
    body::before {
      content: "Please rotate your device to landscape üì±";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.95);
      color: #fff;
      font-size: 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 9999;
    }
  }

  .bg-layer {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: opacity 1s ease-in-out;
    z-index: -3;
    animation: moveBg 40s ease-in-out infinite alternate;
  }
  #background1 { opacity: 1; }
  #background2 { opacity: 0; }
  @keyframes moveBg { 0% { background-position:0% center} 50% { background-position:100% center} 100% { background-position:0% center} }

  video.bg-video {
    position: fixed; top:0; left:0;
    width:100%; height:100%;
    object-fit:cover; z-index:-4;
    display:none;
  }

  .timer-container {
    position: absolute;
    bottom: 30px;
    right: 40px;
    background: rgba(0,0,0,0.5);
    padding: 20px 30px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
  }
  .timer { font-size: 2.5rem; font-weight: bold; }
  .controls { margin-top: 10px; }
  .controls button {
    margin:0 5px; background: rgba(255,255,255,0.2);
    border:none; color:#fff; font-size:1.2rem;
    border-radius:8px; cursor:pointer; padding:6px 10px;
    transition:0.3s; position:relative;
  }

  .music-controls {
    position: fixed; bottom:25px; left:30px;
    background: rgba(0,0,0,0.5);
    padding:15px 20px; border-radius:15px;
    display:flex; align-items:center; gap:10px;
  }
  select { background: rgba(255,255,255,0.2); color: #000; border:none; padding:5px; border-radius:6px; cursor:pointer; }
  .mute-btn { background: rgba(255,255,255,0.2); border:none; color:#fff; font-size:1.3rem; border-radius:8px; cursor:pointer; padding:6px 10px; transition:0.3s; position:relative; }

  .home-btn, .nav-btn, .controls button { position:relative; }
  .nav-btn {
    background: rgba(0,0,0,0.5); color:#fff; border:none;
    font-size:1.5rem; padding:10px 15px; border-radius:10px;
    cursor:pointer; transition:0.3s;
  }
  .nav-container { position: fixed; top:20px; right:20px; display:flex; gap:10px; z-index:10; }
  .home-btn { position: fixed; top:20px; left:20px; background: rgba(0,0,0,0.5); color:#fff; border:none; font-size:1.2rem; padding:10px 15px; border-radius:10px; cursor:pointer; transition:0.3s; }

  .tooltip {
    position:absolute; background: rgba(0,0,0,0.7); color:#fff;
    padding:4px 8px; border-radius:6px; font-size:0.85rem;
    white-space:nowrap; pointer-events:none; opacity:0;
    transform: translateY(-10px); transition:opacity 0.15s ease, transform 0.15s ease;
    z-index:100; box-shadow:0 0 10px rgba(0,0,0,0.6);
  }
  .show-tooltip { opacity:1; transform:translateY(0); }

  .controls button:hover, .mute-btn:hover, .nav-btn:hover, .home-btn:hover { background: rgba(255,255,255,0.4); }
</style>
</head>
<body>

<div id="background1" class="bg-layer"></div>
<div id="background2" class="bg-layer"></div>
<video id="bgVideo" class="bg-video" autoplay muted loop></video>

<button class="home-btn" id="homeBtn" onclick="window.location.href='index.html'">üè† Home</button>
<div class="nav-container">
  <button id="prevBtn" class="nav-btn">‚è™</button>
  <button id="nextBtn" class="nav-btn">‚è©</button>
</div>

<div class="timer-container">
  <div class="timer" id="timerDisplay">25:00</div>
  <div class="controls">
    <button id="pauseBtn">‚è∏</button>
    <button id="resumeBtn">‚ñ∂</button>
    <button id="stopBtn">‚èπ</button>
  </div>
</div>

<div class="music-controls">
  <label for="musicSelect">üéµ Music:</label>
  <select id="musicSelect">
    <option value="music/1.mp3">Focus Track 1</option>
    <option value="music/2.mp3">Focus Track 2</option>
    <option value="music/3.mp3">Focus Track 3</option>
    <option value="music/4.mp3">Focus Track 4</option>
    <option value="music/Blue Bird.mp3">Blue Bird</option>
    <option value="music/Shinunoga.mp3">Shinunoga</option>
    <option value="music/Sparkle.mp3">Sparkle</option>
    <option value="music/Suzume.mp3">Suzume</option>
    <option value="music/Blue.mp3">Blue</option>
  </select>
  <button id="muteBtn" class="mute-btn">üîä</button>
</div>

<audio id="bgMusic" loop></audio>

<script>
// ===== Timer =====
let timerInterval;
const display = document.getElementById('timerDisplay');

let storedTime = parseInt(localStorage.getItem('pomodoroTime'));
let storedStart = parseInt(localStorage.getItem('pomodoroStart'));

let timeLeft;
if(storedTime && storedStart){
  const elapsed = Math.floor((Date.now() - storedStart) / 1000);
  timeLeft = storedTime - elapsed;
  if(timeLeft < 0) timeLeft = 0;
} else {
  timeLeft = 25 * 60;
}

function updateDisplay() {
  const m = Math.floor(timeLeft / 60).toString().padStart(2,'0');
  const s = (timeLeft % 60).toString().padStart(2,'0');
  display.textContent = `${m}:${s}`;
}
updateDisplay();

function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    if(timeLeft>0){ timeLeft--; updateDisplay(); }
    else { clearInterval(timerInterval); alert('Session Complete!'); }
  },1000);
}

document.getElementById('pauseBtn').addEventListener('click', ()=> clearInterval(timerInterval));
document.getElementById('resumeBtn').addEventListener('click', startTimer);
document.getElementById('stopBtn').addEventListener('click', ()=>{
  clearInterval(timerInterval);
  timeLeft = 25*60;
  updateDisplay();
});

// ===== Background Images =====
const images = [
  'images/focus/1.jpg','images/focus/2.jpg','images/focus/3.jpg',
  'images/focus/4.jpg','images/focus/5.jpg','images/focus/6.jpg',
  'images/focus/7.jpg','images/focus/8.jpg','images/focus/9.jpg',
  'images/focus/10.jpg','images/focus/1.jpeg','images/focus/2.jpeg',
  'images/focus/3.jpeg','images/focus/4.jpeg','images/focus/5.jpeg',
  'images/focus/6.jpeg','images/focus/7.jpeg','images/focus/8.jpeg',
  'images/focus/9.jpeg','images/focus/10.jpeg','images/focus/11.jpeg',
  'images/focus/1.mp4','images/focus/2.mp4',
  'images/focus/3.mp4','images/focus/4.mp4'
];
const bg1 = document.getElementById('background1');
const bg2 = document.getElementById('background2');
const bgVideo = document.getElementById('bgVideo');
let showingBg1 = true, index = 0;

function showBackground(i){
  const file = images[i];
  const visible = showingBg1 ? bg1 : bg2;
  const hidden = showingBg1 ? bg2 : bg1;
  hidden.style.backgroundImage = `url(${file})`;
  hidden.style.opacity = 1;
  visible.style.opacity = 0;
  showingBg1 = !showingBg1;
}

function nextBackground(){ index=(index+1)%images.length; showBackground(index); }
function prevBackground(){ index=(index-1+images.length)%images.length; showBackground(index); }

document.getElementById('nextBtn').addEventListener('click', nextBackground);
document.getElementById('prevBtn').addEventListener('click', prevBackground);
setInterval(nextBackground, 10000);
showBackground(index);

// ===== Music =====
const music = document.getElementById('bgMusic');
const selector = document.getElementById('musicSelect');
const muteBtn = document.getElementById('muteBtn');

selector.addEventListener('change', ()=>{
  music.src = selector.value;
  music.play();
});
music.src = selector.value;
music.play();

muteBtn.addEventListener('click', ()=>{
  music.muted = !music.muted;
  muteBtn.textContent = music.muted ? 'üîá' : 'üîä';
});
</script>
</body>
</html>
